
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="./assets/ico/favicon.png">

    <title>diybio postcard project</title>

    <!-- Bootstrap core CSS -->
    <link href="./assets/css/bootstrap.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="./assets/css/postcards.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="../../assets/js/html5shiv.js"></script>
      <script src="../../assets/js/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>

    <!-- Static navbar -->
    <div class="navbar navbar-default navbar-static-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a href="/"><img src="assets/images/diybio_logo_googles.png" class="pull-left logo"></a>
          <a class="navbar-brand" href="/">diybio postcard project</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="http://twitter.com/intent/tweet?text=replace+this+text+with+a+description+and+a+photo+of+your+cool+project-+include+the+following+hashtag:+%23diybiohi" target="postcard_tweet">Contribute</a></li>
            <li><a href="https://docs.google.com/spreadsheet/viewform?formkey=dFpESTlEeW5zLVEyakxkSkhnMHZwNFE6MQ" target="postcard_subscribe">Subscribe</a></li>
            <li><a href="#archive">Archive</a></li>
            <li><a href="#faq">FAQ</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </div>


    <div class="container">

      <!-- Main component for a primary marketing message or call to action -->
      <div class="jumbotron">
        <div class="row">
          <div class="col-md-6">
            <img class="img-responsive" src="assets/images/diybio_postcard_mockup_800x608px.png">
          </div>
          <div class="col-md-6">
            <h2>Tweet “<a href="http://twitter.com/intent/tweet?text=replace+this+text+with+a+description+and+a+photo+of+your+cool+project-+include+the+following+hashtag:+%23diybiohi" target="postcard_tweet">#diybiohi</a>” to contribute to the free diybio postcard project</h2>
            <p>It's a short list of the most interesting diybio projects from the last quarter - delivered to your door via postcard. Subscriptions are free and anyone can submit an update via twitter. <a class="text-primary" href="#faq">Learn more.</a></p>
            <div class="row">
              <div class="col-sm-6">
                <a class="btn btn-lg btn-primary btn-block" href="http://twitter.com/intent/tweet?text=replace+this+text+with+a+description+and+a+photo+of+your+cool+project-+include+the+following+hashtag:+%23diybiohi" target="postcard_tweet">contribute <span class="glyphicon glyphicon-comment"> </span></a>
              </div>
              <div class="col-sm-6">
                <a class="btn btn-lg btn-success btn-block" href="https://docs.google.com/spreadsheet/viewform?formkey=dFpESTlEeW5zLVEyakxkSkhnMHZwNFE6MQ" target="postcard_subscribe">subscribe <span class="glyphicon glyphicon-inbox"></span></a>
              </div>
            </div>
          </div>
        </div>
      </div> <!-- /jumbotron -->

      <div class="row launch-progress">
        <div class="col-md-12 text-center">
          <h1>Current Submissions</h1>
        </div>
      </div>

<!-- TODO make launch bars dynamic
			<div class="launch-progress">

        <div class="row">
          <div class="col-md-3 col-sm-3 text-center">contributions open: <strong>1 Nov 2013</strong></div>
          <div class="col-md-6 col-sm-6">
            <div class="progress progress-striped active">
              <div class="progress-bar" role="progressbar" aria-valuenow="45" aria- valuemin="0" aria-valuemax="100" style="width: 45%">
                <span class="sr-only">45% Complete</span>
              </div>
            </div>
          </div>          
          <div class="col-md-3 col-sm-3 text-center">postcards printed: <strong>24 Nov 2013</strong></div>
        </div>
      
      </div> -->

			<!-- TODO switch to Oembed api? https://dev.twitter.com/docs/api/1.1/get/statuses/oembed -->


	 		<div id="tweets-container">
	 		</div>

      <div id="faq" class="clearfix"> <!-- faq -->
        <div class="row text-center">
          <h1>Postcards FAQ</h1>
        </div>
        <div class="row">
          <div class="col-md-8 col-md-offset-2">
            <div class="list-group">

              <h4>What's this postcard thing all about?</h4>
              <p>The diybio postcard project is designed to encourage the members of the community to share quick updates about their work each quarter. Submissions are short and organized via twitter. Once a quarter, we pick the 7 most interesting and print them on hundreds of postcards, using the photo from one of the entries as the front of the card. Then we mail the cards to subscribers all over the world - for free. We hope the cards become physical artifacts celebrating and documenting the activity of diybio.</p>
              
              <h4>How do I contribute?</h4>
              <p>Contributing is accomplished via tweeting. Valid contributions have three parts:
                <ul>
                  <li>a short description of your work</li>
                  <li>a link to a photo of the work (a link to a page w/ a photo and more information is even better</li>
                  <li>the hashtag <em>#diybiohi</em></li>
                  It's that simple. So what are you waiting for? <a href="http://twitter.com/intent/tweet?text=replace+this+text+with+a+description+and+a+photo+of+your+cool+project-+include+the+following+hashtag:+%23diybiohi">Contribute now!</a>
                </ul>
              </p>

              <h4>How much does it cost?</h4>
              <p>It's free! We have funding to print &amp; mail 300-500 cards (depending on the proportion of international subscribers).</p>

              <h4>Who picks the winning entries?</h4>
              <p>Each postcard has room for 7 contributions. Currently we (Jason Bobe &amp; Mac Cowell) just pick what seem like the "best" 7, with feedback from the diybio google group, but we're working on adding a voting system to truely democratize the selection process.</p>

              <h4>How do I subscribe?</h4>
              <p>Fill out <a href="https://docs.google.com/spreadsheet/viewform?formkey=dFpESTlEeW5zLVEyakxkSkhnMHZwNFE6MQ" target="postcard_subscribe">this form</a>. Subscriptions are currently free.</p>

              <h4>How do I unsubscribe?</h4>
              <p>Email <a href="mailto:postcards@diybio.org">postcards@diybio.org</a> with your full name and ask to unsubscribe.</p>

              <h4>When will I see my entry here?</h4>
              <p>The server fetches <em>"#diybiohi"</em> tweets from twitter every 10 minutes.</p>

              <h4>How does this site work?</h4>
              <p>It's <a href="https://github.com/diybio/diybio-postcard-tweets">open source &amp; on github</a>. Built with the twitter api, ruby twitter gem, heroku, mongo, bootstrap, and lots of javascript. Want the diybio tweets via JSON?
              <div class="well"><a href="/diybiohi.json">#diybiohi</a>, <a href="/diybiohi-archive.json">#diybiohi-archive</a>, &amp; <a href="/tweets.json">"diybio"</a>.</p></div>

              <h4>Where can I see prior postcards?</h4>
              <p>The first batch went out <a href="http://diybio.org/postcards/vol1/">January 2012.</a> You can view the <a href="http://diybio.org/postcards/vol1/">original entries on wordpress</a> and in the <a href="#archive">new archive</a>.</p>
              <img src="assets/images/2011-01-01_postcardv1_600x450.jpg" class="img-rounded img-responsive">

            </div>
          </div>
        </div>
      </div>

    </div> <!-- /container -->


 		<div id="archive">
 			<h1 class="text-center">#diybiohi archive</h1>
      <div class="container" id="tweets-archive">
      </div>
 		</div>

    <!-- handlebars tweets container template -->
    <script id="entry-template" type="text/x-handlebars-template">
      <!-- open first row -->
      <div class="row">

      {{#each tweets}}

        <div class="col-sm-6">
          <blockquote>
            <p>{{linkify text}}</p>
            <small>
              <a href="http://twitter.com/{{username}}">{{username}}<a/> at 
              <cite title="http://twitter.com/{{username}}/status/{{tweet_id}}">
              	<a href="http://twitter.com/{{username}}/status/{{tweet_id}}">
              		<time datetime="{{time}}">{{timeFromNow time}}</time>
              	<a/>
              </cite>
            </small>
          </blockquote>
        </div>

      <!-- every 2 posts, close then open row div -->
      {{#everyOther @index 2 }}
        </div>
        <div class="row">
      {{/everyOther}}
        
      {{/each}}
        </div> <!-- //close last row -->
    </script>


    <!-- Bootstrap, jquery, & handlebars core JavaScript -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="//code.jquery.com/jquery.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.4.0/moment.min.js"></script>
    <script src="./assets/js/bootstrap.min.js"></script>
    <script src="./assets/js/handlebars.js"></script>
    <script src="./assets/js/ba-linkify.js"></script>

    <!-- handlebars helpers -->
    <script type="text/javascript">

      Handlebars.registerHelper("everyOther", function (index, amount, scope) {
        if ( ++index % amount ) 
          return scope.inverse(this);
        else 
          return scope.fn(this);
      });

      Handlebars.registerHelper('linkify', function (text) {
        var shortText;
        var urlSchemeRegEx = new RegExp( "[a-z\d.-]+:\/\/(.*)", "i" );
        var options = {
        	callback: function( text, href ) {
          	if (href){
          		shortText = urlSchemeRegEx.exec(href)[1].substr(0,45);
          		return '<a href="' + href + '" title="' + href + '">' + shortText + '</a>';
          	} else {
          		return text;
          	};
        	}
        };

        var text = linkify(text, options);
        // var text = linkify(text);
        return new Handlebars.SafeString(text);
      });

      Handlebars.registerHelper('timeFromNow', function (text) {
 				return moment(text).fromNow();
      });

      Handlebars.registerHelper('timeShortFormat', function (text) {
 				return moment(text).format('lll ZZ');
      });

    </script>

    <!-- load json, render handlebars -->
    <script type="text/javascript">
      $(function() {
          $.get('/diybiohi.json').success(function(tweets) {
            var source = $("#entry-template").html();
            var template = Handlebars.compile(source);
            var context = { tweets: tweets };
            
            // if no submissions, insert :(
            if( context.tweets.length ){
            	var html = template(context);
            }else{
            	var html = '<div class="col-md-12 text-center"><h3>No Submissions Yet :(</h3><p>submit something!</p></div>';
            };

            $('#tweets-container').html(html);
          });
      });
    </script>

    <script type="text/javascript">
      $(function() {
          $.get('/diybiohi-archive.json').success(function(tweets) {
            var source   = $("#entry-template").html();
            var template = Handlebars.compile(source);
            var context = { tweets: tweets };
            var html    = template(context);

            $('#tweets-archive').html(html);
          });
      });
    </script>

  <!-- livereload -->
    <script>document.write('<script src="http://' + (location.host || 'localhost').split(':')[0] + ':35729/livereload.js?snipver=1"></' + 'script>')</script>

  </body>
</html>
